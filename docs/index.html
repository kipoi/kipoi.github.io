<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Kipoi documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Home";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Kipoi documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href=".">Home</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#links">Links</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick start</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#installing-all-required-model-dependencies">Installing all required model dependencies</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#python">Python</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#command-line">Command-line</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configure-kipoi-in-kipoiconfigyaml">Configure Kipoi in .kipoi/config.yaml</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#contributing-models">Contributing models</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#plugins">Plugins</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#kipoi_interpret">kipoi_interpret</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#variant-effect-prediction-with-a-subset-of-kipoi-models">Variant effect prediction with a subset of Kipoi models</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tutorials">Tutorials</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#citing-kipoi">Citing Kipoi</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#development">Development</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#license">License</a>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Using</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="using/python/">Python</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="using/cli/">CLI</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="using/R/">R</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="using/plugins/">Plugins</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="using/03_Model_sources/">Private and public model sources</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="using/04_Installing_on_OSX/">Installing on OSX</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Contributing</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/01_Getting_started/">Getting started</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/02_Writing_model.yaml/">model.yaml</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/04_Writing_dataloader.py/">dataloader.py</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/03_Writing_dataloader.yaml/">dataloader.yaml</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/05_Writing_model.py/">model.py</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="contributing/06_dumping_models_programatically/">Multiple very similar models</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="tutorials/contributing_models/">Contributing models</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="tutorials/python-api/">Python API</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="tutorials/R-api/">R API</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="tutorials/tf_binding_models/">Comparing models</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="tutorials/composing_models/">Composing models</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="faq/">FAQ</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Api</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="api/list_/">list</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/install_/">install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/model/">Model</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/dataloader/">Dataloader</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/pipeline/">Pipeline</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/sources/">sources</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/metadata/">metadata</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/readers/">readers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="api/writers/">writers</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Kipoi documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Home</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="http://github.com/kipoi/kipoi/edit/master/docs/index.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="kipoi-model-zoo-for-genomics">Kipoi: Model zoo for genomics</h1>
<p><a href='https://circleci.com/gh/kipoi/kipoi'>
    <img alt='CircleCI' src='https://circleci.com/gh/kipoi/kipoi.svg?style=svg' style="max-height:20px;width:auto">
</a></p>
<!-- <a href=https://coveralls.io/github/kipoi/kipoi?branch=master>
    <img alt='Coverage status' src=https://coveralls.io/repos/github/kipoi/kipoi/badge.svg?branch=master style="max-height:20px;width:auto;">
</a> -->
<p><a href=https://gitter.im/kipoi>
    <img alt='Gitter' src=https://badges.gitter.im/kipoi/kipoi.svg style="max-height:20px;width:auto;">
</a></p>
<p>This repository implements a python package and a command-line interface (CLI) to access and use models from Kipoi-compatible model zoo's.</p>
<p><img src="http://kipoi.org/static/img/fig1_v8_hires.png" width=600></p>
<h2 id="links">Links</h2>
<ul>
<li><a href="http://kipoi.org">kipoi.org</a> - Main website</li>
<li><a href="http://kipoi.org/docs">kipoi.org/docs</a> - Documentation</li>
<li><a href="https://github.com/kipoi/models">github.com/kipoi/models</a> - Model zoo for genomics maintained by the Kipoi team</li>
<li><a href="https://doi.org/10.1101/375345">biorxiv preprint</a> - Kipoi: accelerating the community exchange and reuse of predictive models for genomics</li>
<li><a href="https://medium.com/@zigaavsec/kipoi-utilizing-machine-learning-models-for-genomics-e75b7e26a56c">blog post introducing Kipoi</a>, <a href="https://medium.com/@zigaavsec/kipoi-0-6-release-notes-854a45bd6fdc">blog post describing 0.6 release</a></li>
<li><a href="https://github.com/kipoi/examples">github.com/kipoi/examples</a> - Use-case oriented tutorials</li>
</ul>
<h2 id="installation">Installation</h2>
<p>Kipoi requires <a href="https://conda.io/">conda</a> to manage model dependencies.
Make sure you have either anaconda (<a href="https://www.anaconda.com/download/">download page</a>) or miniconda (<a href="https://conda.io/miniconda.html">download page</a>) installed. If you are using OSX, see <a href="http://kipoi.org/docs/using/04_Installing_on_OSX">Installing python on OSX</a>. Maintained python versions: &gt;=3.6&lt;=3.9. </p>
<p>For systems using python 3.8 and 3.9, is necessary to install hdf5=1.10.6 and pkgconfig prior to installing kipoi.</p>
<pre><code class="language-bash">conda install --yes -c conda-forge hdf5=1.10.6 pkgconfig
</code></pre>
<p>Install Kipoi using <a href="https://pip.pypa.io/en/stable/">pip</a>:</p>
<pre><code class="language-bash">pip install kipoi
</code></pre>
<h2 id="quick-start">Quick start</h2>
<p>Explore available models on <a href="http://kipoi.org/groups/">https://kipoi.org/groups/</a>. Use-case oriented tutorials are available at <a href="https://github.com/kipoi/examples">https://github.com/kipoi/examples</a>.</p>
<h3 id="installing-all-required-model-dependencies">Installing all required model dependencies</h3>
<p>Use <code>kipoi env create &lt;model&gt;</code> to create a new conda environment for the model. You can use the following two commands to create common environments suitable for multiple models.</p>
<pre><code>kipoi env create shared/envs/kipoi-py3-keras2   # add --gpu to install gpu-compatible deps
kipoi env create shared/envs/kipoi-py3-keras1.2
</code></pre>
<p>Before using a model in any way, activate the right conda enviroment:</p>
<pre><code class="language-bash">source activate $(kipoi env get &lt;model&gt;)
</code></pre>
<p>Alternatively, you can use the Singularity or Docker containers with all dependencies installed. Singularity containers can be seamlessly used with the CLI by adding the <code>--singularity</code> flag to <code>kipoi</code> commands.</p>
<h3 id="python">Python</h3>
<p>Before using a model from python in any way, activate the right conda enviroment:</p>
<pre><code class="language-bash">source activate $(kipoi env get &lt;model&gt;)
</code></pre>
<pre><code class="language-python">import kipoi

kipoi.list_models() # list available models

model = kipoi.get_model(&quot;Basset&quot;) # load the model

model = kipoi.get_model(  # load the model from a past commit
    &quot;https://github.com/kipoi/models/tree/&lt;commit&gt;/&lt;model&gt;&quot;,
    source='github-permalink'
)

# main attributes
model.model # wrapped model (say keras.models.Model)
model.default_dataloader # dataloader
model.info # description, authors, paper link, ...

# main methods
model.predict_on_batch(x) # implemented by all the models regardless of the framework
model.pipeline.predict(dict(fasta_file=&quot;hg19.fa&quot;,
                            intervals_file=&quot;intervals.bed&quot;))
# runs: raw files -[dataloader]-&gt; numpy arrays -[model]-&gt; predictions 
</code></pre>
<p>For more information see: <a href="notebooks/python-api.ipynb">notebooks/python-api.ipynb</a> and <a href="https://kipoi.org/docs/using/python/">docs/using/python</a></p>
<h3 id="command-line">Command-line</h3>
<pre><code>$ kipoi
usage: kipoi &lt;command&gt; [-h] ...

    # Kipoi model-zoo command line tool. Available sub-commands:
    # - using models:
    ls               List all the available models
    list_plugins     List all the available plugins
    info             Print dataloader keyword argument info
    get-example      Download example files
    predict          Run the model prediction
    pull             Download the directory associated with the model
    preproc          Run the dataloader and save the results to an hdf5 array
    env              Tools for managing Kipoi conda environments

    # - contributing models:
    init             Initialize a new Kipoi model
    test             Runs a set of unit-tests for the model
    test-source      Runs a set of unit-tests for many/all models in a source

    # - plugin commands:
    interpret        Model interpretation using feature importance scores like ISM, grad*input or DeepLIFT
</code></pre>
<pre><code class="language-bash"># Run model predictions and save the results
# sequentially into an HDF5 file
kipoi predict &lt;Model&gt; --dataloader_args='{
  &quot;intervals_file&quot;: &quot;intervals.bed&quot;,
  &quot;fasta_file&quot;: &quot;hg38.fa&quot;}' \
  --singularity \
  -o '&lt;Model&gt;.preds.h5'
</code></pre>
<p>Explore the CLI usage by running <code>kipoi &lt;command&gt; -h</code>. Also, see <a href="http://kipoi.org/docs/using/cli">docs/using/cli/</a> for more information.</p>
<h3 id="configure-kipoi-in-kipoiconfigyaml">Configure Kipoi in <code>.kipoi/config.yaml</code></h3>
<p>You can add your own (private) model sources. See <a href="http://kipoi.org/docs/using/03_Model_sources">docs/using/03_Model_sources/</a>.</p>
<h3 id="contributing-models">Contributing models</h3>
<p>See <a href="http://kipoi.org/docs/contributing/01_Getting_started">docs/contributing getting started</a> and <a href="http://kipoi.org/docs/tutorials/contributing_models">docs/tutorials/contributing/models</a> for more information.</p>
<h2 id="plugins">Plugins</h2>
<p>Kipoi supports plug-ins which are published as additional python packages. Currently available plug-in is:</p>
<h3 id="kipoi_interpret"><a href="https://github.com/kipoi/kipoi-interpret">kipoi_interpret</a></h3>
<p>Model interpretation plugin for Kipoi. Allows to use feature importance scores like in-silico mutagenesis (ISM), saliency maps or DeepLift with a wide range of Kipoi models. <a href="https://github.com/kipoi/kipoi-interpret/blob/master/notebooks/1-DNA-seq-model-example.ipynb">example notebook</a></p>
<pre><code class="language-bash">pip install kipoi_interpret
</code></pre>
<h3 id="variant-effect-prediction-with-a-subset-of-kipoi-models">Variant effect prediction with a subset of Kipoi models</h3>
<p>Variant effect prediction allows to annotate a vcf file using model predictions for the reference and alternative alleles. The output is written to a new tsv file. For more information see <a href="https://github.com/kipoi/kipoi-veff2">https://github.com/kipoi/kipoi-veff2</a>.</p>
<h2 id="documentation">Documentation</h2>
<ul>
<li><a href="http://kipoi.org/docs">kipoi.org/docs</a></li>
</ul>
<h2 id="tutorials">Tutorials</h2>
<ul>
<li><a href="https://github.com/kipoi/examples">https://github.com/kipoi/examples</a> - Use-case oriented tutorials</li>
<li><a href="https://github.com/kipoi/kipoi/tree/master/notebooks">notebooks</a></li>
</ul>
<h2 id="citing-kipoi">Citing Kipoi</h2>
<p>If you use Kipoi for your research, please cite the publication of the model you are using (see model's <code>cite_as</code> entry) and the paper describing Kipoi: https://doi.org/10.1038/s41587-019-0140-0.</p>
<pre><code class="language-bibtex">@article{kipoi,
  title={The Kipoi repository accelerates community exchange and reuse of predictive models for genomics},
  author={Avsec, Ziga and Kreuzhuber, Roman and Israeli, Johnny and Xu, Nancy and Cheng, Jun and Shrikumar, Avanti and Banerjee, Abhimanyu and Kim, Daniel S and Beier, Thorsten and Urban, Lara and others},
  journal={Nature biotechnology},
  pages={1},
  year={2019},
  publisher={Nature Publishing Group}
}
</code></pre>
<h2 id="development">Development</h2>
<p>If you want to help with the development of Kipoi, you are more than welcome to join in! </p>
<p>For the local setup for development, you should install all required dependencies using one of the provided dev-requirements-py&lt;36|37|38|39&gt;.yml files</p>
<pre><code class="language-bash">conda env create -f dev-requirements-py39.yml
conda activate kipoi-dev
pip install -e .
</code></pre>
<p>You can test the package by running <code>py.test</code>. </p>
<p>If you wish to run tests in parallel, run <code>py.test -n 6</code>.</p>
<h2 id="license">License</h2>
<p>Kipoi is MIT-style licensed, as found in the LICENSE file.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="using/python/" class="btn btn-neutral float-right" title="Python">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="http://github.com/kipoi/kipoi/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
      <span><a href="using/python/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.2.3
Build Date UTC : 2021-10-29 11:31:12.006518+00:00
-->
